{"version":3,"sources":["logger.js","api.js","constants.js","CodeMirror.js","Wysiwyg.js","App.js","serviceWorker.js","index.js"],"names":["logger","Pino","prettyPrint","level","wrapper","_len","arguments","length","data","Array","_key","apply","src_logger","info","bind","debug","trace","warn","error","fatal","config","baseURL","process","timeout","client","axios","create","api","_ref","Object","asyncToGenerator","regenerator_default","a","mark","_callee","options","resp","_args","wrap","_context","prev","next","undefined","objectSpread","sent","abrupt","t0","stop","this","CodeMirror","props","_props$value","value","_props$options","react_default","createElement","react_codemirror2","assign","Wysiwyg","editor","editorRef","React","createRef","prevProps","setData","window","CKEDITOR","Promise","resolve","reject","scriptjs","get","replace","current","toolbarGroups","name","groups","removeButtons","_this2","callback","on","evt","onChange","getData","setCkeditorRef","destroy","className","ref","Component","defaultProps","htmltojsxConverter","HTMLtoJSX","createClass","initState","modelRemote","model","parentId","title","mode","isLoadingAll","activeDocId","jsx","App","state","docs","previewRef","ckeditorRef","handleClearChanges","_","MessageBox","confirm","confirmButtonText","cancelButtonText","_this","setState","clipboard","ClipboardJS","text","trigger","e","Notification","success","App_Main","Main","css","_templateObject","App_Actions","cx","defineProperty","_templateObject2","src_Wysiwyg","src_CodeMirror","theme","lineNumbers","lineWrapping","readOnly","Actions","es5","onClick","disabled","_ref2","_callee3","_context3","innerHTML","_x2","cute","pretty","converted","convert","component","concat","_ref3","_callee4","_context4","msgbox","message","showCancelButton","_x3","icon","App_StateHandler","_ref4","handleState","Fragment","_templateObject3","placeholder","nativeType","test","type","loading","isLoading","size","_ref5","_callee5","_context5","preventDefault","url","method","id","toConsumableArray","filter","doc","find","_x4","content","_templateObject4","onDoubleClick","StateHandler","children","withRouter","Boolean","location","hostname","match","ReactDOM","render","BrowserRouter","src_App","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.6060a0c9.chunk.js","sourcesContent":["import Pino from 'pino'\n\n// LEVELS\n\n// 'silent'\n// 'fatal'\n// 'error'\n// 'warn'\n// 'info'\n// 'debug'\n// 'trace'\n\nconst logger = Pino({ prettyPrint: true })\n\nlogger.level = 'trace'\n\n// USAGE EXAMPLE:\n\n// logger.debug('comment', obj, array, ...)\n// logger.error(...)\n// logger.fatal(...)\n// logger.info(...)\n\nconst wrapper = level => (...data) => {\n  logger[level].apply(logger, data)\n}\n\nexport default {\n  info: logger.info.bind(logger),\n  debug: logger.debug.bind(logger),\n  trace: logger.trace.bind(logger),\n  warn: logger.warn.bind(logger),\n  error: wrapper('error'),\n  fatal: wrapper('fatal')\n}\n","import axios from 'axios'\nimport logger from './logger'\nimport { API_URL } from './constants'\n\nconst config = {\n  baseURL: API_URL,\n  timeout: 4000\n}\n\nconst client = axios.create(config)\n\nconst api = async (options = {}) => {\n  logger.debug('API REQUEST =>', { ...config, ...options })\n\n  try {\n    const resp = await client(options)\n\n    logger.debug('API RESPONSE =>', resp)\n\n    return resp\n  } catch (error) {\n    logger.error(error)\n\n    throw error\n  }\n}\n\nexport default api\n","export const API_URL = process.env.REACT_APP_API_URL\n","import React from 'react'\nimport 'codemirror/lib/codemirror.css'\nimport 'codemirror/theme/material.css'\nimport 'codemirror/theme/neat.css'\nimport 'codemirror/mode/xml/xml.js'\nimport 'codemirror/mode/javascript/javascript.js'\nimport { UnControlled } from 'react-codemirror2'\n\nconst CodeMirror = props => {\n  const {\n    value = '',\n    options = {}\n  } = props\n\n  return (\n    <UnControlled\n      {...props}\n      value={value}\n      options={options}\n    />\n  )\n}\n\nexport default CodeMirror\n","import React from 'react'\nimport logger from './logger'\nimport scriptjs from 'scriptjs'\n\nclass Wysiwyg extends React.Component {\n  static defaultProps = {\n    onChange: () => {},\n    data: '',\n    setCkeditorRef: () => {}\n  }\n\n  editor = null\n\n  editorRef = React.createRef()\n\n  componentDidUpdate (prevProps) {\n    if (this.editor && prevProps.data !== this.props.data) {\n      this.editor.setData(this.props.data)\n    }\n  }\n\n  async componentDidMount () {\n    try {\n      if (!window.CKEDITOR) {\n        await new Promise((resolve, reject) => scriptjs.get(\n          '/ckeditor/ckeditor.js'\n          , resolve\n          , reject\n        ))\n      }\n\n      if (window.CKEDITOR) {\n        this.editor = window.CKEDITOR.replace(this.editorRef.current, {\n          toolbarGroups: [\n            { name: 'document', groups: [ 'mode', 'document', 'doctools' ] },\n            { name: 'editing', groups: [ 'find', 'selection', 'spellchecker', 'editing' ] },\n            { name: 'forms', groups: [ 'forms' ] },\n            { name: 'basicstyles', groups: [ 'basicstyles', 'cleanup' ] },\n            { name: 'insert', groups: [ 'insert' ] },\n            { name: 'links', groups: [ 'links' ] },\n            '/',\n            { name: 'clipboard', groups: [ 'undo', 'clipboard' ] },\n            { name: 'paragraph', groups: [ 'list', 'indent', 'blocks', 'align', 'bidi', 'paragraph' ] },\n            { name: 'styles', groups: [ 'styles' ] },\n            { name: 'colors', groups: [ 'colors' ] },\n            { name: 'tools', groups: [ 'tools' ] },\n            { name: 'others', groups: [ 'others' ] },\n            { name: 'about', groups: [ 'about' ] }\n          ],\n          removeButtons: 'Cut,Copy,Paste,Internallink'\n        })\n\n        // pre fill if needed\n        await new Promise(resolve => this.editor.setData(this.props.data, { callback: resolve }))\n\n        this.editor.on('change', (evt) => {\n          this.props.onChange(evt.editor.getData())\n        })\n\n        this.props.setCkeditorRef(this.editor)\n      }\n    } catch (error) {\n      logger.error(error)\n    }\n  }\n\n  async componentWillUnmount () {\n    if (this.editor) {\n      await this.editor.destroy()\n    }\n  }\n\n  render () {\n    return (\n      <div className={'wysiwyg'}>\n        <div className={'ckeditor4'} ref={this.editorRef} />\n      </div>\n    )\n  }\n}\n\nexport default Wysiwyg\n","import React from 'react'\nimport 'element-theme-default'\nimport {\n  Button,\n  // Dropdown,\n  MessageBox,\n  // Loading,\n  Input,\n  Tooltip,\n  Notification\n} from 'element-react'\nimport withRouter from 'react-router-dom/withRouter'\nimport { css, cx } from 'emotion'\n// import isEqual from 'lodash.isequal'\nimport api from './api'\nimport logger from './logger'\n// import moment from 'moment'\nimport HTMLtoJSX from 'htmltojsx'\nimport CodeMirror from './CodeMirror'\nimport ClipboardJS from 'clipboard'\nimport Wysiwyg from './Wysiwyg'\nimport pretty from 'pretty'\n\nconst PAGE_OFFSET = '50px'\n\nconst htmltojsxConverter = new HTMLtoJSX({\n  createClass: false\n})\n\nconst initState = {\n  modelRemote: '',\n  model: '',\n  parentId: undefined,\n  title: undefined,\n  mode: 'edit',\n  isLoadingAll: false,\n  activeDocId: '',\n  jsx: ''\n}\n\nclass App extends React.Component {\n  state = {\n    ...initState,\n    docs: []\n  }\n\n  async componentDidMount () {\n    //   this.setState({ isLoadingAll: true })\n\n    //   try {\n    //     const { data: docs } = await api({\n    //       url: '/docs',\n    //       method: 'GET'\n    //     })\n\n    //     this.setState({ docs: docs })\n    //   } catch (error) {\n    //     logger.error(error)\n    //   }\n\n    //   this.setState({ isLoadingAll: false })\n\n    // clipboard\n    const clipboard = new ClipboardJS('.clipboardButton', {\n      text: trigger => this.state.jsx\n    })\n\n    clipboard.on('success', e => {\n      // logger.debug(e)\n\n      Notification.success('React component copied to clipboard successfully!')\n    })\n\n    clipboard.on('error', e => {\n      logger.error(e)\n    })\n  }\n\n  previewRef = React.createRef()\n\n  ckeditorRef = null\n\n  handleClearChanges = async _ => {\n    try {\n      await MessageBox.confirm(\n        'Your changes will be lost, are you sure?'\n        , 'Clear editor and start from scratch'\n        , {\n          confirmButtonText: 'CLEAR CHANGES',\n          cancelButtonText: 'CANCEL'\n        }\n      )\n\n      this.ckeditorRef.setData()\n\n      this.setState({\n        ...initState\n      })\n    } catch (error) {\n      // do nothing\n    }\n\n    // this.props.push('/')\n  }\n\n  setCkeditorRef = ref => { this.ckeditorRef = ref }\n\n  render () {\n    // const {\n    //   // location: { pathname },\n    //   history: { push }\n    // } = this.props\n\n    // const {\n    //   parentId,\n    //   title,\n    //   docs,\n    //   model,\n    //   modelRemote,\n    //   mode,\n    //   isLoadingAll,\n    //   activeDocId,\n    //   jsx\n    // } = this.state\n\n    // const setState = this.setState.bind(this)\n\n    // const previewRef = this.previewRef\n\n    return (\n      <Main\n        {...this.state}\n        {...this.props}\n        {...this}\n        setState={this.setState.bind(this)}\n      />\n    )\n  }\n}\n\nconst Main = props => {\n  const {\n    modelRemote,\n    mode,\n    jsx,\n    setState,\n    previewRef,\n    setCkeditorRef\n  } = props\n\n  return (\n    <div className={css`\n      padding-top: ${PAGE_OFFSET};\n\n      .nav {\n        z-index: 999;\n        display: flex;\n        justify-content: space-between;\n        height: ${PAGE_OFFSET};\n        position: fixed;\n        top: 0;\n        left: 0;\n        right: 0;\n        background: #ffffff;\n        align-items: center;\n        padding: 0 .5rem;\n\n        > div {\n          display: flex;\n        }\n\n        .docsButton {\n          margin-right: 10px;\n\n          ul {\n            white-space: nowrap;\n          }\n        }\n\n        .feedback {\n          font-weight: lighter;\n        }\n\n        button {\n          font-weight: bold;\n        }\n      }\n\n      .docsList {\n        width: 200px;\n        /* top: ${PAGE_OFFSET}; */\n        left: 0;\n        position: fixed;\n        height: calc(100vh - ${PAGE_OFFSET});\n        box-sizing: border-box;\n        background-color: #F9FAFC;\n        overflow: auto;\n        z-index: 1;\n\n        .docItem {\n          padding: .5rem;\n          font-weight: lighter;\n          font-size: 13.5px;\n          border-bottom: 1px solid #D3DCE6;\n          cursor: pointer;\n\n          &.active {\n            background-color: #1D8CE0;\n            color: #ffffff;\n          }\n        }\n      }\n      \n      .mainArea {\n        \n        .editorArea {\n          flex-grow: 1;\n          /* margin-left: 200px; */\n\n          .cke_inner.cke_reset {\n            div[id$=\"_contents\"] {\n              height: calc(100vh - ${PAGE_OFFSET} - 77px) !important;\n            }\n          }\n          \n          .wysiwyg {\n            height: calc(100vh - ${PAGE_OFFSET});\n            background: #EFEFEF;\n\n            > div {\n              max-width: 800px;\n              margin: auto;\n            }\n          }\n          \n          .preview {\n            height: calc(100vh - ${PAGE_OFFSET});\n            box-sizing: border-box;\n            background: #EFEFEF;\n            padding: 2rem 2rem;\n            \n            .html {\n              background: #ffffff;\n              min-height: 100%;\n              padding: 1cm 2cm;\n              box-sizing: border-box;\n              max-width: 800px;\n              margin: auto;\n            }\n          }\n\n          .export {\n            position: relative;\n\n            .CodeMirror {\n              height: calc(100vh - ${PAGE_OFFSET});\n            }\n\n            .clipboardButton {\n              position: absolute;\n              top: 5px;\n              right: 5px;\n              z-index: 3;\n            }\n          }\n        }\n      }\n    `}>\n\n      {/* LIST OF VERSIONS */}\n      {/* <div className={'docsList'}>\n        <ListOfVersions {...props} />\n      </div> */}\n\n      <div className={'mainArea'}>\n\n        {/* ACTIONS */}\n        <Actions {...props} />\n\n        {/* EDITOR AREA */}\n        <div className={'editorArea'}>\n\n          {/* EDITOR */}\n          <div className={cx('edit', {\n            [css`display: none;`]: mode !== 'edit'\n          })}>\n            <Wysiwyg\n              setCkeditorRef={setCkeditorRef}\n              data={modelRemote}\n              onChange={data => setState({ model: data })}\n            />\n          </div>\n\n          {/* PREVIEW */}\n          {mode === 'preview' &&\n            <div className={'preview'}>\n              <div className={'html'} ref={previewRef} />\n            </div>\n          }\n\n          {/* EXPORT TO JSX */}\n          {mode === 'export' &&\n            <div className={'export'}>\n              <button\n                className={'el-button clipboardButton el-button--success'}\n              >\n              COPY TO CLIPBOARD\n              </button>\n\n              <CodeMirror\n                value={jsx}\n                options={{\n                  mode: 'javascript',\n                  theme: 'material',\n                  lineNumbers: true,\n                  lineWrapping: true,\n                  readOnly: true\n                }}\n              />\n            </div>\n          }\n\n        </div>\n\n      </div>\n\n    </div>\n  )\n}\n\n// const ListOfVersions = props => {\n//   const {\n//     docs,\n//     setState,\n//     activeDocId,\n//     isLoadingAll,\n//     parentId\n//   } = props\n\n//   return (\n//     <>\n//       <Dropdown\n//         className={'docsButton'}\n//         trigger={'click'}\n//         onCommand={async id => {\n//           setState({ isLoadingAll: true })\n\n//           const doc = docs.find(doc => doc.id === id)\n\n//           // find most recent doc\n//           const mostRecentDoc = docs.filter(doc => doc.parentId === id || doc.id === id)\n//             .sort((a, b) => +b.createdAt - a.createdAt)\n//             .shift()\n\n//           try {\n//             // get it\n//             await getDocById({\n//               activeDocId,\n//               doc: mostRecentDoc,\n//               setState\n//             })\n//           } catch (error) {\n//             logger.error(error)\n//           }\n\n//           setState({\n//             parentId: doc.id,\n//             title: doc.title,\n//             mode: 'edit',\n//             isLoadingAll: false\n//           })\n//         }}\n//         menu={\n//           <Dropdown.Menu>\n//             {docs.filter(doc => !!doc.title)\n//               .sort((a, b) => {\n//                 if (a.title < b.title) { return -1 }\n//                 if (a.title > b.title) { return 1 }\n//                 return 0\n//               })\n//               .map((doc = {}, idx) => (\n//                 <Dropdown.Item\n//                   className={'menuOption'}\n//                   key={idx}\n//                   command={doc.id}\n//                 >{doc.title}</Dropdown.Item>\n//               ))}\n//           </Dropdown.Menu>\n//         }\n//       >\n//         <Button\n//           loading={isLoadingAll}\n//           disabled={!docs.filter(doc => !!doc.title).length}\n//         >\n//           <span>\n//                 DOCS ({docs.filter(doc => !!doc.title).length})\n//             <i className='el-icon-caret-bottom el-icon--right' />\n//           </span>\n//         </Button>\n//       </Dropdown>\n\n//       {/* LIST */}\n//       <StateHandler>\n//         {({ handleState, state }) =>\n//           <React.Fragment>\n//             {state.isLoading && <Loading fullscreen />}\n\n//             {!parentId &&\n//             <div className={'docItem'}>Select a doc from \"DOCS\"</div>\n//             }\n\n//             {parentId &&\n//             <React.Fragment>\n\n//               {/* GET A DOC */}\n//               {docs.filter(doc => doc.parentId === parentId || doc.id === parentId)\n//                 .sort((a, b) => +b.createdAt - a.createdAt)\n//                 .map((doc, idx) => (\n//                   <div\n//                     className={cx({\n//                       docItem: true,\n//                       active: activeDocId === doc.id\n//                     })}\n//                     key={idx}\n//                     onClick={async _ => {\n//                       await getDocById({\n//                         activeDocId,\n//                         doc,\n//                         setState,\n//                         handleState\n//                       })\n\n//                       setState({ mode: 'edit' })\n//                     }}\n//                   >\n//                     <div className={'row'}>Revision created on</div>\n//                     <div className={'row'}>{moment(doc.createdAt).format('MM/DD/YYYY hh:mm:ss:SSS a')}</div>\n//                   </div>\n//                 ))\n//               }\n\n//             </React.Fragment>\n//             }\n//           </React.Fragment>\n//         }\n//       </StateHandler>\n//     </>\n//   )\n// }\n\nconst Actions = props => {\n  const {\n    mode,\n    setState,\n    previewRef,\n    model,\n    title,\n    parentId,\n    // modelRemote,\n    docs,\n    handleClearChanges\n  } = props\n\n  return (\n    <div className={'nav'}>\n      <div className={'left'}>\n\n        <Button\n          onClick={_ => setState({ mode: 'edit' })}\n          disabled={mode === 'edit'}\n        >\n              EDIT\n        </Button>\n\n        <Button\n          onClick={async _ => {\n            await setState({ mode: 'preview' })\n\n            previewRef.current.innerHTML = model\n          }}\n          disabled={mode === 'preview'}\n        >\n          PREVIEW\n        </Button>\n\n        <Button\n          onClick={_ => {\n            const cute = pretty(model)\n\n            const converted = htmltojsxConverter.convert(cute)\n\n            const component = `\nimport React from 'react'\n\nconst ExportedComponent = props => {\n  return (\n    \n    ${converted}\n  )\n}\n\nexport default ExportedComponent\n`\n            setState({\n              jsx: component,\n              mode: 'export'\n            })\n          }\n          }\n          disabled={mode === 'export' || !model}\n        >\n              EXPORT to REACT\n        </Button>\n\n        <Button\n          onClick={async _ => {\n            MessageBox.msgbox({\n              title: 'Help',\n              message: 'This is a web app to create React components from html that is generated via the text editor. Enter some text and then hit the \"EXPORT to REACT\" button to see the results.',\n              showCancelButton: false,\n              confirmButtonText: 'OK'\n            })\n          }}\n          icon={'information'}\n        >\n          HELP\n        </Button>\n\n        {/* CREATE DOC */}\n        {/* <StateHandler>\n          {({ handleState, state }) =>\n            <Button\n              onClick={async _ => {\n                handleState({ isLoading: true })\n\n                let newTitle\n\n                if (!title) {\n                  try {\n                    const { value } = await MessageBox.prompt(\n                      'Please enter a Title for this document',\n                      'Set Title',\n                      {\n                        confirmButtonText: 'OK',\n                        cancelButtonText: 'Cancel',\n                        inputPattern: /\\w/,\n                        inputErrorMessage: 'Invalid Title'\n                      }\n                    )\n\n                    newTitle = `${value}`.trim()\n\n                    setState({ title: newTitle })\n                  } catch (error) {\n                    handleState({ isLoading: false })\n\n                    return\n                  }\n                }\n\n                try {\n                  const { data: doc } = await api({\n                    url: '/docs',\n                    method: 'POST',\n                    data: {\n                      parentId: parentId,\n                      title: newTitle,\n                      contents: model\n                    }\n                  })\n\n                  setState(({ docs }) => ({\n                    modelRemote: model,\n                    docs: [ ...docs, doc ],\n                    activeDocId: doc.id\n                  }))\n\n                  if (!parentId) {\n                    setState({ parentId: doc.id })\n                  }\n                } catch (error) {\n                  logger.error(error)\n\n                  setState({ title: undefined })\n                }\n\n                handleState({ isLoading: false })\n              }}\n\n              loading={state.isLoading}\n              type={'primary'}\n              disabled={isEqual(model, modelRemote) || model === ''}\n            >\n              SAVE\n            </Button>\n          }\n        </StateHandler> */}\n\n      </div>\n\n      <StateHandler>\n        {({ handleState, state }) =>\n          <>\n            {state.mode === 'edit' &&\n            <form className={css`\n              display: flex; \n              align-items: center;\n            `}>\n              <Input\n                placeholder={'enter a title'}\n                value={state.title}\n                onChange={value => handleState({ title: value })}\n              />\n              <Button\n                nativeType={'submit'}\n                disabled={!/\\w/.test(state.title) || state.title === title}\n                icon={'circle-check'}\n                type={'primary'}\n                loading={state.isLoading}\n                size={'small'}\n                onClick={async e => {\n                  e.preventDefault()\n\n                  handleState({ isLoading: true })\n\n                  try {\n                    await api({\n                      url: `/docs/${parentId}`,\n                      method: 'PUT',\n                      data: {\n                        id: parentId,\n                        title: state.title\n                      }\n                    })\n\n                    setState({\n                      title: state.title,\n                      docs: [\n                        ...docs.filter(doc => doc.id !== parentId),\n                        {\n                          ...docs.find(doc => doc.id === parentId),\n                          title: state.title\n                        }\n                      ]\n                    })\n                  } catch (error) {\n                    logger.error(error)\n                  }\n\n                  handleState({\n                    mode: undefined,\n                    isLoading: false\n                  })\n                }}\n              >SAVE</Button>\n              <Button\n                size={'small'}\n                onClick={_ => handleState({ mode: undefined })}\n                icon={'circle-close'}\n              >CANCEL</Button>\n            </form>\n            }\n\n            {!state.mode &&\n            <Tooltip content={'double click to edit'}>\n              <div\n                className={cx('feedback', css`cursor: pointer;`)}\n                onDoubleClick={_ => handleState({ mode: 'edit', title: title })}\n              >\n                {title && `Title: ${title}`}\n              </div>\n            </Tooltip>\n            }\n          </>\n        }\n      </StateHandler>\n\n      <Button\n        type={'warning'}\n        onClick={handleClearChanges}\n        disabled={!model}\n      >\n            START NEW\n      </Button>\n\n    </div>\n  )\n}\n\n// const getDocById = async ({\n//   activeDocId = '',\n//   doc = {},\n//   setState = () => {},\n//   handleState = () => {}\n// }) => {\n//   if (activeDocId && activeDocId === doc.id) {\n//     return\n//   }\n\n//   handleState({ isLoading: true })\n\n//   try {\n//     const { data } = await api({\n//       url: `/docs/${doc.id}`,\n//       method: 'GET'\n//     })\n\n//     setState({\n//       model: data.contents,\n//       modelRemote: data.contents,\n//       activeDocId: doc.id\n//     })\n//   } catch (error) {\n//     logger.error(error)\n//   }\n\n//   handleState({ isLoading: false })\n// }\n\nclass StateHandler extends React.Component {\n  state = {}\n\n  render () {\n    return this.props.children({\n      handleState: this.setState.bind(this),\n      state: this.state\n    })\n  }\n}\n\nexport default withRouter(App)\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\nimport * as serviceWorker from './serviceWorker'\nimport { BrowserRouter as Router } from 'react-router-dom'\n\nReactDOM.render(\n  <Router>\n    <App />\n  </Router>\n  , document.getElementById('root'))\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister()\n"],"sourceRoot":""}